<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
		<title>更改配送区域</title>
		<link rel="stylesheet" type="text/css" href="../css/api.css" />
		<link rel="stylesheet" type="text/css" href="../css/common.css" />
		<link rel="stylesheet" type="text/css" href="../css/printerSet.css" />
	</head>
	<body>
		<div class="topBack">
			<img class="bg" src="../image/bg_003.png" alt="" />
		</div>
		<div class="header" id="header">
			<div class="backIcon" onclick="goBack();"><img src="../image/deliver/icon_back.png" alt="" />
			</div>
			<div class="title">
				<span>打印设置</span>
			</div>
		</div>
		<div class="middleInfo">
			<div class="h10"></div>
			<div class="h10"></div>
			<div class="h1"></div>
			<div class="item2">
				<div class="itemName">
					<span>配送区域</span>
				</div>
				<div class="content2">
					<textarea cols="20" type="text" id="area" value="" onchange="">我是测试页。专门测试菜单打印的。</textarea >
				</div>
			</div>
			<div>蓝牙MAC:<input id="bluetoothMac" /></div>
			<div class="h1"></div>
			<div class="saveBtn-active" id="saveBtn" onclick="printStrTest();">
				<span>打印测试页</span>
			</div>
			<div style="position: relative;top: 80px;">
				<button class="saveBtn-active" onclick="bluetoothConnect();">
					蓝牙连接
				</button>
				<input class="saveBtn-active" type="button" value="发送字符" onclick="bluetoothSend();" />
				<input class="saveBtn-active"  type="button" value="断开蓝牙" onclick="bluetoothCancel();" />
			</div>
		</div>
	</body>
	<script type="text/javascript" src="../script/api.js"></script>
	<script type="text/javascript" src="../script/av.min.js"></script>
	<script type="text/javascript" src="../script/AV_common.js"></script>
	<script type="text/javascript" src="../script/common.js"></script>
	<script>
		apiready = function() {
			api.addEventListener({
				name : 'keyback'
			}, function(ret, err) {
				goBack();
			});
		}
		//		function setSaveBtnActive() {
		//			document.getElementById('saveBtn').className = 'saveBtn-active';
		//			//			document.getElementById('saveBtn').setAttribute('onclick', 'printStrTest();');
		//		}
		function goBack() {
			api.closeWin({
			});
		}

		function printStrTest() {
			console.log('printer in!');
			var gprinter = api.require('gprinterModule');
			var str = document.getElementById('area').value;
			var mac = document.getElementById('bluetoothMac').value;
			console.log(str);
			gprinter.print({
				msg : str,
				mac : mac
			}, function(ret, err) {
				if (ret) {
					alert(JSON.stringify(ret));
				} else {
					alert(JSON.stringify(ret));
				}
			});
		}

		function bluetoothConnect() {
			var obj = api.require('bluetooth');
			obj.connect(function(ret, err) {
				var progress = ret.progress;
				var message = ret.message;
				console.log('bluetooth' + JSON.stringify(ret));
			});
		}

		function bluetoothSend() {
			var obj = api.require('bluetooth');
			obj.send({
				type : 0,
				data : 'bluetooth send string test'
			});
		}

		function bluetoothCancel() {
			var obj = api.require('bluetooth');
			obj.cancel();
		}
	</script>
</html>
