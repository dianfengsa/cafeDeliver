<!DOCTYPE HTML>
<html>
	<head>
		<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<meta name="format-detection" content="telephone=no">
		<meta name="content-type" content="text/html" charset="utf-8">
		<link href="../css/reset.css" rel="stylesheet">
		<link rel="stylesheet" href="../css/flex-layout.css">
		<link rel="stylesheet" href="../css/layout.css">
		<link rel="stylesheet" href="../css/index.css">
		<link href="../css/orderDeliveInfo.css" rel="stylesheet">
		<title>我的信息</title>
	</head>
	<body>
		<div class="user-info-web flex-item-24 flex-row">
			<div class="user-info-web-bg flex-item-24 flex-center flex-row">

			</div>
			<div class="user-info-web-box flex-item-24 flex-center flex-row">
				<div class="flex-item-20 flex-row clearfix ">
					<ul class="clearfix bt">
						<li  class="">员工姓名：<span>xxxx</span><span class="fr">职称：</span></li>
					</ul>
					<ul class="clearfix bt">
						<li  class="">配送区域：<span>外伶仃岛测试区域</span></li>
					</ul>
					<ul class="clearfix bt">
						<li  class="">区域号码：<span id="deliverPhone"></span></li>
					</ul>
					<ul class="clearfix bt">
						<li  class="">配送员状态：<span id=""><div id="div1" class="open1"><div id="div2" class="open2"></div></div></span></li>
					</ul>
				</div>
			</div>
			<div class="user-out flex-item-24 flex-center flex-between" id="btnLogOut">
				<button type="button" value="退出登录" class="user-out-button">
					退出登录
				</button>
			</div>
		</div>
		<script src="../newAppJs/jquery.min.js"></script>
		<script src="../newAppJs/api.js"></script>
		<script src="../newAppJs/share.js"></script>
	</body>
</html>
<script>
	var pageParam;
	apiready = function() {
		//状态按钮
		var div2 = document.getElementById("div2");
		var div1 = document.getElementById("div1");
		pageParam = api.pageParam;
		var deliverManInfo = $api.getStorage("deliverMan");
		console.log("deliverManInfo>>>>" + JSON.stringify(deliverManInfo));
		$("#dName").text(deliverManInfo.name ? deliverManInfo.name : "暂无昵称");
		$("#deliverPhone").text(deliverManInfo.phone);
		$("#deliverDd").text(deliverManInfo.area);
		//退出登录
		$("#btnLogOut").on("touchend", ".user-out-button", function() {
			logOut();
		}); 
		$(".user-info-web").on('touchend','#div2',function () { 
			touchOff();
			touchNo();
			touchStatus();
		});
		//切换配送员状态
		var touchOff = function() {
			div1.className = (div1.className == "close1") ? "open1" : "close1";
		};
		var touchNo = function() {
			div2.className = (div2.className == "close2") ? "open2" : "close2";
		};
		var touchStatus = function() {
			if (div1.className == "open1") {
				$(".user-logo-img").css({
					"background" : 'url("../image/info_no.png")center center no-repeat',
					'background-size' : 'auto 100%'
				});
				$(".user-logo").css({
					'border' : '#ff6600 solid 0.3rem'
				});
				$(".user-info-web-bg").css({
					"background" : 'url("../image/info_no_bg.jpg")center center no-repeat',
					'background-size' : '100% 100%',
					'border-bottom' : '#ff6600 solid 0.1rem'
				});
				$(".buff").css({
					'color' : '#ff6600'
				});
			}
			if (div1.className == "close1") {
				$(".user-logo-img").css({
					"background" : 'url("../image/info_off.png")center center no-repeat',
					'background-size' : 'auto 100%'
				});
				$(".user-logo").css({
					'border' : '#c9c9c9 solid 0.3rem'
				});
				$(".user-info-web-bg").css({
					'background' : 'url("../image/info_off_bg.png")center center no-repeat',
					'background-size' : '100% 100%',
					'border-bottom' : '#c9c9c9 solid 0.1rem'
				});
				$(".buff").css({
					'color' : '#818181'
				});
			}
		};
		/*我的信息页面按钮*/
	};
	function logOut() {
		api.confirm({
			title : '提示',
			msg : '确定注销登录？',
			buttons : ['取消', '确定']
		}, function(ret, err) {
			if (ret.buttonIndex == 2) {
				AV.User.logOut();
				var currentUser = AV.User.current();
				api.openWin({
					name : 'login',
					url : '../new_login.html',
					opaque : true, // 页面不透明
					bounces : false, // 不允许页面弹动
					reload : true,
					delay : 0
				});
			}
		});
	}
</script>
